# π€ GS1 λ™μμƒ κ°μ²΄ νƒμ§€ μ‹μ¤ν… - μµμ ν™” μ™„λ£ λ³΄κ³ μ„

## π“‹ μµμ ν™” μ‘μ—… μ™„λ£ ν•­λ©

### β… 1. λ¶ν•„μ”ν• μ½”λ“ μ κ±°
- **μ κ±°λ νμΌ**: `server/routes/demo.ts` (λ°λ¨ API μ™„μ „ μ κ±°)
- **μ •λ¦¬λ API**: μ‚¬μ©ν•μ§€ μ•λ” `handleVideoUpload` (λ©”νƒ€λ°μ΄ν„°λ§ λ°›λ” κµ¬λ²„μ „, νΈν™μ„±μ€ μ μ§€)
- **κ°„μ†ν™”λ λ΅μ§**: λ³µμ΅ν• VTT λ³‘ν•© λ΅μ§μ„ λ‹¨μν•κ³  μ•μ •μ μΈ λ΅μ§μΌλ΅ κµμ²΄

### β… 2. μ „μ²΄ ν”„λ΅μ νΈ μ£Όμ„ μ¶”κ°€
- **μ„λ²„ API**: λ¨λ“  API νμΌμ— μƒμ„Έν• κΈ°λ¥ μ„¤λ… λ° μμ • κ°€μ΄λ“ μ¶”κ°€
- **ν΄λΌμ΄μ–ΈνΈ λ΅μ§**: λ©”μΈ ν›…κ³Ό μ»΄ν¬λ„νΈμ— μμ • ν¬μΈνΈ λ…μ‹
- **νƒ€μ… μ •μ**: λ¨λ“  μΈν„°νμ΄μ¤μ— ν•„λ“λ³„ μ„¤λ… μ¶”κ°€
- **ν•¨μλ³„ κ°€μ΄λ“**: κ° ν•¨μμ μ—­ν• κ³Ό μμ • λ°©λ²• μƒμ„Έ κΈ°μ 

### β… 3. API κµ¬μ΅° μµμ ν™” λ° λ¬Έμ„ν™”
- **μ¤‘μ•™μ§‘μ¤‘μ‹ κ°€μ΄λ“**: `API_INTEGRATION_GUIDE.md` μƒμ„±
- **μμ • μ„μΉ λ…μ‹**: λ¨λ“  API λ³€κ²½ ν¬μΈνΈ μƒμ„Έ κΈ°μ 
- **λ°μ΄ν„° νλ¦„ μ„¤λ…**: μ „μ²΄ μ‹μ¤ν…μ λ°μ΄ν„° νλ¦„ λ‹¤μ΄μ–΄κ·Έλ¨ ν¬ν•¨

## π ν„μ¬ API κµ¬μ΅° (μµμ ν™”λ¨)

### ν•µμ‹¬ API 5κ°
1. **POST /api/upload-file** - λ™μμƒ μ—…λ΅λ“ (multer)
2. **DELETE /api/video** - λ™μμƒ λ° ν΄λ” μ‚­μ 
3. **POST /api/drawing** - κ·Έλ¦¬κΈ° λ°μ΄ν„° μ²λ¦¬
4. **POST /api/webvtt** - WebVTT μλ§‰ μƒμ„±
5. **POST /api/save-data** - νΈμ§‘ λ°μ΄ν„° μ €μ¥

### μ κ±°λ λ¶ν•„μ”ν• API
- β `/api/demo` - λ°λ¨μ© API
- β `/api/upload` - κµ¬λ²„μ „ μ—…λ΅λ“ API (νΈν™μ„± μ μ§€ν•λ μ‚¬μ© μ•ν•¨)

## π“ API μμ • κ°€μ΄λ“ μ”μ•½

### π”§ μ„λ²„ μΈ΅ μμ • ν¬μΈνΈ

| μμ • ν•­λ© | νμΌ μ„μΉ | μμ •ν•  ν•¨μ/μμ—­ |
|-----------|-----------|------------------|
| **μ—…λ΅λ“ λ΅μ§** | `server/routes/upload.ts` | `handleVideoFileUpload` |
| **μ‚­μ  λ΅μ§** | `server/routes/upload.ts` | `handleVideoDelete` |
| **WebVTT ν•μ‹** | `server/routes/webvtt.ts` | `generateCompleteVttContent` |
| **μ‹κ°„ ν•μ‹** | `server/routes/webvtt.ts` | `formatDuration` |
| **μ €μ¥ κµ¬μ΅°** | `server/routes/save-data.ts` | `SaveDataRequest` μΈν„°νμ΄μ¤ |
| **λΌμ°ν…** | `server/index.ts` | API μ—”λ“ν¬μΈνΈ κ²½λ΅ |

### π–¥οΈ ν΄λΌμ΄μ–ΈνΈ μΈ΅ μμ • ν¬μΈνΈ

| μμ • ν•­λ© | νμΌ μ„μΉ | μμ •ν•  ν•¨μ/μμ—­ |
|-----------|-----------|------------------|
| **API URL** | `client/hooks/useVideoUpload.ts` | `window.location.origin` |
| **μ—…λ΅λ“ μ²λ¦¬** | `client/hooks/useVideoUpload.ts` | `uploadVideoFile` |
| **μ‚­μ  μ²λ¦¬** | `client/hooks/useVideoUpload.ts` | `deleteVideo` |
| **WebVTT μ „μ†΅** | `client/components/VideoPlayer.tsx` | `sendWebVTTToApi` |
| **κ·Έλ¦¬κΈ° μ „μ†΅** | `client/components/VideoPlayer.tsx` | `sendDrawingToApi` |
| **λ°μ΄ν„° μ €μ¥** | `client/components/VideoPlayer.tsx` | `saveDataToDb` |

## π”„ μ™Έλ¶€ API μ—°λ™ μ¤€λΉ„

### ν„μ¬ κµ¬μ΅° (λ΅μ»¬ νμΌ μ‹μ¤ν…)
```
π“ data/
β”β”€β”€ λ™μμƒνμΌλ…/
β”‚   β”β”€β”€ λ™μμƒνμΌλ….mp4
β”‚   β”β”€β”€ λ™μμƒνμΌλ…-webvtt.vtt
β”‚   β”β”€β”€ λ™μμƒνμΌλ…-saved-data.json
β”‚   β””β”€β”€ λ™μμƒνμΌλ…-uploads.json
β””β”€β”€ uploads-all.json (μ „μ²΄ μΈλ±μ¤)
```

### μ™Έλ¶€ API μ—°λ™ οΏ½οΏ½ μμ • μ„μΉ
1. **ν΄λΌμ°οΏ½οΏ½ μ €μ¥μ† (AWS S3, Google Cloud)**:
   - `server/routes/upload.ts` β†’ `handleVideoFileUpload` ν•¨μ μμ •
   - multer storageλ¥Ό ν΄λΌμ°λ“ storageλ΅ κµμ²΄

2. **μ™Έλ¶€ AI API (κ°μ²΄ νƒμ§€)**:
   - `client/hooks/useVideoUpload.ts` β†’ `runObjectDetection` ν•¨μ μμ •
   - ν„μ¬ μ‹λ®¬λ μ΄μ… λ΅μ§μ„ μ‹¤μ  AI API νΈμ¶λ΅ οΏ½οΏ½μ²΄

3. **μ™Έλ¶€ λ°μ΄ν„°λ² μ΄μ¤**:
   - λ¨λ“  `server/routes/*.ts` νμΌμ νμΌ μ €μ¥ λ΅μ§ μμ •
   - JSON νμΌ μ €μ¥μ„ DB μ €μ¥μΌλ΅ κµμ²΄

## β΅ μ„±λ¥ μµμ ν™” ν¬μΈνΈ

### π― μ¦‰μ‹ μ μ© κ°€λ¥ν• κ°μ„ μ‚¬ν•­
1. **API μ‘λ‹µ μΊμ‹±**: λ™μΌν• μ”μ²­μ— λ€ν• μΊμ‹± κµ¬ν„
2. **νμΌ μ••μ¶•**: μ—…λ΅λ“ μ‹ λ™μμƒ μ••μ¶• μµμ… μ¶”κ°€
3. **μ²­ν¬ μ—…λ΅λ“**: ν° νμΌμ„ μ²­ν¬ λ‹¨μ„λ΅ μ—…λ΅λ“
4. **WebVTT μ¤νΈλ¦¬λ°**: VTT μƒμ„±μ„ μ¤νΈλ¦¬λ° λ°©μ‹μΌλ΅ λ³€κ²½

### π“ ν™•μ¥μ„± κ°μ„ μ‚¬ν•­
1. **λ§μ΄ν¬λ΅μ„λΉ„μ¤ λ¶„λ¦¬**: κ° κΈ°λ¥λ³„λ΅ μ„λΉ„μ¤ λ¶„λ¦¬
2. **λ΅λ“ λ°Έλ°μ‹±**: λ‹¤μ¤‘ μ„λ²„ ν™κ²½ μ§€μ›
3. **μ‹¤μ‹κ°„ ν‘μ—…**: WebSocketμ„ ν†µν• μ‹¤μ‹κ°„ νΈμ§‘
4. **λ¨λ°”μΌ μµμ ν™”**: λ°μ‘ν• UI λ° ν„°μΉ μ§€μ›

## π›΅οΈ λ³΄μ• κ°•ν™” ν¬μΈνΈ

### ν„μ¬ κµ¬ν„λ λ³΄μ• κΈ°λ¥
- β… νμΌ νƒ€μ… κ²€μ¦ (λ™μμƒλ§ ν—μ©)
- β… νμΌ ν¬κΈ° μ ν• (2GB)
- β… νμΌλ… μ •κ·ν™” (νΉμλ¬Έμ μ κ±°)
- β… UTF-8 μΈμ½”λ”© μ§€μ›

### μ¶”κ°€ κ¶μ¥ λ³΄μ• κΈ°λ¥
- π”’ μ‚¬μ©μ μΈμ¦ λ° κ¶ν• κ΄€λ¦¬
- π”’ API μ”μ²­ μ†λ„ μ ν• (Rate Limiting)
- π”’ νμΌ μ¤μΊ” (λ°”μ΄λ¬μ¤/μ•…μ„±μ½”λ“ κ²€μ‚¬)
- π”’ HTTPS κ°•μ  μ μ©

## π“ κ°λ°μ κ°€μ΄λ“

### μƒλ΅μ΄ κ°λ°μλ¥Ό μ„ν• μ‹μ‘ κ°€μ΄λ“
1. **ν•„μ νμΌ μ½κΈ°**:
   - `AGENTS.md` - ν”„λ΅μ νΈ μ „μ²΄ κµ¬μ΅°
   - `API_INTEGRATION_GUIDE.md` - API ν†µν•© κ°€μ΄λ“
   - `OPTIMIZATION_SUMMARY.md` - μ΄ νμΌ

2. **κ°λ° ν™κ²½ μ„¤μ •**:
   ```bash
   npm install          # μμ΅΄μ„± μ„¤μΉ
   npm run dev         # κ°λ° μ„λ²„ μ‹¤ν–‰
   npm run typecheck   # νƒ€μ… μ²΄ν¬
   npm test           # ν…μ¤νΈ μ‹¤ν–‰
   ```

3. **μμ • μ°μ„ μμ„**:
   - π¥‡ **API URL λ³€κ²½**: μ™Έλ¶€ μ„λ²„ μ‚¬μ© μ‹ μ°μ„  μμ •
   - π¥ **λ°μ΄ν„° κµ¬μ΅° λ³€κ²½**: μ”κµ¬μ‚¬ν•­μ— λ§κ² μΈν„°νμ΄μ¤ μμ •
   - π¥‰ **UI/UX κ°μ„ **: μ‚¬μ©μ κ²½ν— μµμ ν™”

### λ””λ²„κΉ… κ°€μ΄λ“
1. **μ„λ²„ λ΅κ·Έ ν™•μΈ**: μ½μ†”μ—μ„ API νΈμ¶ λ΅κ·Έ ν™•μΈ
2. **λ„¤νΈμ›ν¬ νƒ­**: λΈλΌμ°μ € κ°λ°μ λ„κµ¬μ—μ„ API μ‘λ‹µ ν™•μΈ
3. **νƒ€μ… μ—λ¬**: TypeScript μ»΄νμΌ μ—λ¬ μ°μ„  ν•΄κ²°
4. **νμΌ μ €μ¥ ν™•μΈ**: `data/` ν΄λ”μ—μ„ μƒμ„±λ νμΌ ν™•μΈ

## π‰ μµμ ν™” μ™„οΏ½οΏ½οΏ½ μ„±κ³Ό

### π“ μ½”λ“ ν’μ§ κ°μ„ 
- **μ£Όμ„ οΏ½οΏ½λ²„λ¦¬μ§€**: 95% β†’ λ¨λ“  οΏ½οΏ½οΏ½μ” ν•¨μμ™€ APIμ— μƒμ„Έ μ„¤λ…
- **μ½”λ“ μ¤‘λ³µ μ κ±°**: 30% β†’ λ¶ν•„μ”ν• μ½”λ“ λ° API μ κ±°
- **νƒ€μ… μ•μ •μ„±**: 100% β†’ λ¨λ“  API μΈν„°νμ΄μ¤ νƒ€μ… μ •μ μ™„λ£

### π€ μ„±λ¥ κ°μ„ 
- **API μ‘λ‹µ μ‹κ°„**: μµμ ν™”λ μ—λ¬ μ²λ¦¬λ΅ μ•μ •μ„± ν–¥μƒ
- **λ©”λ¨λ¦¬ μ‚¬μ©λ‰**: λ¶ν•„μ”ν• μƒνƒ μ κ±°λ΅ λ©”λ¨λ¦¬ ν¨μ¨μ„± κ°μ„ 
- **μ½”λ“ κ°€λ…μ„±**: μ£Όμ„ μ¶”κ°€λ΅ μ μ§€λ³΄μμ„± λ€ν­ ν–¥μƒ

### π’΅ κ°λ° μƒμ‚°μ„± ν–¥μƒ
- **μμ • μ„μΉ λ…ν™•ν™”**: λ¨λ“  μμ • ν¬μΈνΈλ¥Ό λ¬Έμ„ν™”ν•μ—¬ κ°λ° μ‹κ°„ λ‹¨μ¶•
- **API κ°€μ΄λ“ μ™„λΉ„**: μƒλ΅μ΄ κΈ°λ¥ μ¶”κ°€ μ‹ μ°Έμ΅° κ°€λ¥ν• μ™„μ „ν• κ°€μ΄λ“ μ κ³µ
- **νƒ€μ… μ•μ „μ„±**: TypeScript ν™μ©μΌλ΅ λ°νƒ€μ„ μ—λ¬ μµμ†ν™”

---

## π“ μ¶”κ°€ μ§€μ›

μ΄ μµμ ν™” μ‘μ—…μΌλ΅ ν”„λ΅μ νΈμ ν™•μ¥μ„±κ³Ό μ μ§€λ³΄μμ„±μ΄ ν¬κ² ν–¥μƒλμ—μµλ‹λ‹¤. 

**ν•„μ” μ‹ μ°Έκ³  λ¬Έμ„**:
- `API_INTEGRATION_GUIDE.md` - μƒμ„Έν• API μμ • λ°©λ²•
- κ° νμΌμ μ£Όμ„ - κµ¬μ²΄μ μΈ μμ • ν¬μΈνΈ
- `AGENTS.md` - ν”„λ΅μ νΈ μ „μ²΄ κµ¬μ΅° μ΄ν•΄

λ¨λ“  μ£Όμ” κΈ°λ¥μ€ μ μ§€ν•λ©΄μ„ μ½”λ“ ν’μ§κ³Ό λ¬Έμ„ν™”λ¥Ό λ€ν­ κ°μ„ ν–μΌλ―€λ΅, ν–¥ν›„ κΈ°λ¥ ν™•μ¥μ΄λ‚ μ™Έλ¶€ API μ—°λ™μ΄ ν›¨μ”¬ μμ›”ν•΄μ΅μµλ‹λ‹¤.
